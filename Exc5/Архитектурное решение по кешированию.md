# Архитектурное решение по кешированию

## Мотивация
Внедрение кэширования поможет уменьшить время ответа при обращении к данным.
Это позволит ускорить загрузку страниц на фронте, что, в свою очередь,
позволит улучшить пользовательский опыт.

### Что кэшируем
Актуальный список новых заказов (для отображения операторам на первой странице MES)

## Предлагаемое решение
Для для отображения операторам списка новых заказов будем использовать кэширование и на стороне сервера,
и на стороне клиента.

Клиентскоре кэширование: т.к. предполагается, что эти данные могут изменяться достаточно часто,
то для запроса будем выставлять max-age=30.

Серверное кэшировние: Будем применть паттерн Cache-Aside для чтения списка новых заказов. Выбираем этот паттерн, т.к. он лучше всего подходит для 
приложений с большим объёмом запросов на чтение (в данном случае чтение мы и пытаемя оптимизировать). Так же,
если вдруг по каки-то причинам что-то происходит с кэшем, система всё равно может работать, обращаясь напрямую к базе данных.

Для инвалидации кэша будем исползовать подход "программная инвалидация" - инвалидируем
при изменении статуса заказа на "MANUFACTURING_APPROVED" и "MANUFACTURING_STARTED".
"MANUFACTURING_APPROVED" - статус, который интересует операторов в первую очередь, т.к. означает, что заказ готов к тому,
чтобы ператор взял его в производство.
При изменении "MANUFACTURING_STARTED" нужно обновить кэш, т.к. из списка заказов "ушел" заказ, который интересует операторов,
следовательно кэш нужно обновить.

```markdown
[Диаграмма последовательности действий] (https://disk.yandex.ru/d/duXJZofzzfJFaQ)
```
